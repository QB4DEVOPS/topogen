# Changes

This file lists changes.

- Unreleased
  - feat(mgmt): add OOB management network support for flat, flat-pair, and dmvpn modes
    - enable with `--mgmt`
    - creates `SWoob0` unmanaged switch (with `hide_links: true`) and connects all router mgmt interfaces
    - mgmt interface uses DHCP by default (slot 5: IOSv Gi0/5, CSR Gi5)
    - default VRF `Mgmt-vrf`; use `--mgmt-vrf global` for global routing table
    - optional gateway route with `--mgmt-gw IP`
    - configurable slot with `--mgmt-slot N`
    - dmvpn modes (flat and flat-pair underlay) now support `--mgmt` for OOB management
  - feat(ntp): add NTP server configuration
    - enable with `--ntp IP`
    - optional VRF with `--ntp-vrf NAME` (inherits `--mgmt-vrf` if not specified)
  - feat(remark): add `--remark` flag to add custom notes to lab descriptions
  - feat(flat): add new mode "flat-pair" (odd-even pairing). Odd: Gi0/0 -> access switch and Gi0/1 -> even's Gi0/0. Even: no leaf link. Last odd without partner leaves Gi0/1 unused.
  - feat(vrf): add optional VRF support for flat-pair pair links (odd router Gi0/1)
    - enable with `--vrf`
    - set VRF name with `--pair-vrf NAME`
    - lab descriptions (online and offline YAML) include VRF flags when enabled
  - feat(dmvpn): add `--eigrp-stub` to enable `eigrp stub connected summary` on DMVPN flat-pair even routers (pair partners)
  - feat(iosxe): add CSR1000v (IOS-XE) EIGRP template `csr-eigrp`
    - uses `vrf definition TENANT` with `rd 1:1` and `vrf forwarding TENANT`
    - offline YAML uses CSR interface labels (GigabitEthernet1/2/...) when `--device-template csr1000v` is used
  - feat(dmvpn): add DMVPN mode (hub + N spokes) with offline YAML support
    - nodes argument is the number of spokes (R1 is hub; R2.. are spokes)
    - supports `--dmvpn-phase`, `--dmvpn-routing`, `--dmvpn-security`, `--dmvpn-nbma-cidr`, `--dmvpn-tunnel-cidr`
    - templates: `iosv-dmvpn` and `csr-dmvpn`
  - feat(dmvpn): support multi-hub DMVPN
    - select hub router numbers with `--dmvpn-hubs` (e.g., `1,21,41`)
    - when `--dmvpn-hubs` is set, `nodes` is interpreted as total routers (R1..R<nodes>)
    - spokes configure NHRP mappings and NHS entries for all hubs
  - feat(dmvpn): add DMVPN tunnel key option `--dmvpn-tunnel-key` (default: 10)
  - feat(dmvpn): add DMVPN IKEv2 PSK security profile
    - enable with `--dmvpn-security ikev2-psk`
    - provide shared PSK with `--dmvpn-psk <key>`
  - feat(offline): fail if `--offline-yaml FILE` already exists (no-clobber by default)
    - overwrite explicitly with `--overwrite`
  - feat(progress): improve progress/completion visibility
    - DMVPN online supports `--progress` (opt-in)
    - DMVPN offline YAML supports `--progress` (opt-in)
    - DMVPN offline YAML emits a visible "written to <file>" completion message at default loglevel
  - feat(dmvpn): scale offline DMVPN NBMA segment using a flat-style unmanaged switch fabric (core + access switches)
    - uses `--flat-group-size` to control routers per access switch
    - offline YAML layout matches `flat` / `flat-pair` placement style
  - chore: reduce default `DMVPN-ping.tcl` sweep size to 10 for faster ad-hoc validation
  - feat(gui): add optional Gooey GUI (`topogen-gui`) and `topogen[gui]` extra
    - GUI-only: template dropdown and common device-template dropdown
    - GUI-only: clearer offline/online YAML file labels and file-save pickers
  - docs: offline YAML output is recommended to be written under the `out/` directory (see README examples)
  - fix(templates): set `line vty 0 4` `exec-timeout` to `0 0` (was `720 0`)

- version 0.2.4
  - empty

- version 0.2.3
  - feat(flat): add flat mode for topology generation
  - deterministic addressing and EIGRP template updates
  - docs: add CONTRIBUTING.md and update README/examples
  - config: add config.sample.toml with sane defaults
  - templates/flags: add addressing flags and custom-template warning
  - feat: add offline YAML export for CML 2.9 (schema flag)
  - chore: ignore generated offline YAML and untrack sample YAML
  - chore(gitignore): ignore NX lab YAML exports ([Nn][Xx]-*.yaml)
  - feat(template): add iosv-eigrp-stub template (enable EIGRP stub connected summary)
  - docs(readme): note non-flat EIGRP default-route limitation (user must originate default)
  - feat(template): add iosv-eigrp-nonflat for simple/NX (EIGRP 100 on 10.0.0.0/8 and 172.16.0.0/12; passive Lo0)
  - docs(readme): add non-flat EIGRP examples and note that large online builds may not show UI updates until ~25%
  - docs(readme): add flat mode examples

- version 0.2.1 (identical to 0.2.0, but make gh actions happy)
- version 0.2.0
  - properly configure name server / domain name
  - properly inject default route
  - fix indentation for boot.sh script
  - adapted some typing
  - renamed iol.jinja2 to iol-xe.jnja.2
  - added special LXC FRR variant
  - constrain number of node CLI arg
  - fix weird bug when DNS host is selected as the central node
  - updated dependencies
- version 0.1.4
  - added an IOL template
  - removed requests and associated libraries
  - add support to generate IOL nodes
  - fixed "ignore" SSL errors cmd line flag
- version 0.1.3 and earlier were the initial release
